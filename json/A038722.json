{"formerly":"","seq":"1,3,2,6,5,4,10,9,8,7,15,14,13,12,11,21,20,19,18,17,16,28,27,26,25,24,23,22,36,35,34,33,32,31,30,29,45,44,43,42,41,40,39,38,37,55,54,53,52,51,50,49,48,47,46,66,65,64,63,62,61,60,59,58,57,56,78,77,76","description":"Take the sequence of natural numbers (A000027) and reverse successive subsequences of lengths 1,2,3,4,... .","comments":"Ramanujan theta functions: f(q) (see A121373), phi(q) (A000122), psi(q) (A010054), chi(q) (A000700).The rectangular array having A038722 as antidiagonals is the transpose of the rectangular array given by A000217. Column 1 of array A038722 is A000124 (central polygonal numbers). Array A038722 is the dispersion of the complement of A000124. - _Clark Kimberling_, Apr 05 2003a(n) is the smallest number not yet in the sequence such that n + a(n) is one more than a square. - _Franklin T. Adams-Watters_, Apr 06 2009From _Hieronymus Fischer_, Apr 30 2012: (Start). A reordering of the natural numbers.. The sequence is self-inverse in that a(a(n)) = n.. Also: a(1) = 1, a(n) = m (where m is the least triangular number > a(k) for 1 <= k < n), if the minimal natural number not encountered so far is greater than a(n-1), else a(n) = a(n-1)-1. (End)","references":["Suggested by correspondence with Michael Somos.","R. Honsberger, \"Ingenuity in Mathematics\", Table 10.4 on page 87."],"links":["Hieronymus Fischer, <a href=\"/A038722/b038722.txt\">Table of n, a(n) for n = 1..11401</a>","M. Somos, <a href=\"http://cis.csuohio.edu/~somos/multiq.pdf\">Introduction to Ramanujan theta functions</a>","Eric Weisstein's World of Mathematics, <a href=\"http://mathworld.wolfram.com/RamanujanThetaFunctions.html\">Ramanujan Theta Functions</a>","<a href=\"/index/Per#IntegerPermutation\">Index entries for sequences that are permutations of the natural numbers</a>"],"formula":"a(n) = [sqrt(2n-1)-1/2]*[sqrt(2n-1)+3/2]-n+2 = A061579(n-1)+1. Seen as a square table by antidiagonals, T(n, k)=k+(n+k-1)*(n+k-2)/2, i.e., the transpose of A000027 as a square table.G.f.: g(x)=x/(1-x)*(psi(x)-x/(1-x)+2*sum{k>=0, k*x^(k*(k+1)/2)}) where psi(x)=sum{k>=0, x^(k*(k+1)/2)}=1/2*x^(-1/8)*theta_2(0,x^(1/2) is a Ramanujan theta function. - _Hieronymus Fischer_, Aug 08 2007a(n) = floor(sqrt(2*n)+1/2)^2 - n + 1. - _Clark Kimberling_, Jun 05 2011; corrected by _Paul D. Hanna_, Jun 27 2011From _Hieronymus Fischer_, Apr 30 2012: (Start). a(n) = a(n-1)-1, if a(n-1)-1 > 0 is not in the set {a(k)| 1<=k<n}, else a(n) = m, where m is the least triangular number not encountered so far.. a(n) = n for n = 2k(k+1)+1, k >= 0.. a(n+1) = (m+2)(m+3)/2, if 8a(n)-7 is a square of an odd number, else a(n+1) = a(n)-1, where m = (sqrt(8a(n)-7)-1)/2.. a(n) = ceiling((sqrt(8n+1)-1)/2)^2-n+1. (End)","mathematica":"(* Program generates dispersion array T of the increasing sequence f[n] *)r=40; r1=12; c=40; c1=12; f[n_] := Floor[1/2+Sqrt[2n]]  (* complement of column 1 *)mex[list_] := NestWhile[#1 + 1 &, 1, Union[list][[#1]] <= #1 &, 1, Length[Union[list]]]rows = {NestList[f, 1, c]};Do[rows = Append[rows, NestList[f, mex[Flatten[rows]], r]], {r}];t[i_, j_] := rows[[i, j]];TableForm[Table[t[i, j], {i, 1, r1}, {j, 1, c1}]](* A038722 array *)Flatten[Table[t[k, n - k + 1], {n, 1, c1}, {k, 1, n}]](* A038722 sequence *) (* _Clark Kimberling_, Jun 06 2011 *)Table[ n, {m, 12}, {n, m (m + 1)/2, m (m - 1)/2 + 1, -1}] // Flatten (* or *)Table[ Ceiling[(Sqrt[8 n + 1] - 1)/2]^2 - n + 1, {n, 78}] (* _Robert G. Wilson v_, Jun 27 2014 *)","prog":"(PARI) a(n)=local(t=floor(1/2+sqrt(2*n))); if(n<1, 0, t^2-n+1) /* _Paul D. Hanna_ */(Haskell)a038722 n = a038722_list !! (n-1)a038722_list = concat a038722_tabla038722_tabl = map reverse a000027_tabla038722_row n = a038722_tabl !! (n-1)-- _Reinhard Zumkeller_, Nov 08 2013","crossrefs":["A self-inverse permutation of the natural numbers.","Cf. A000027, A020703.","Cf. A132666, A132664, A132665, A132674.","Cf. A056011 (boustrophedon)."],"keyword":"nonn,tabl","offset":"1,2","author":"_N. J. A. Sloane_, May 02 2000"}